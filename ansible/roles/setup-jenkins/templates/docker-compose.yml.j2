version: '3.1'
services:
  jenkins:
    image: imt/jenkins
    ports:
      - 80:8080
      - 5001:5000
    volumes:
      - /local/jenkins:/var/jenkins_home
    secrets:
      - jenkinsAdmin
    environment:
      - CASC_JENKINS_CONFIG=https://raw.githubusercontent.com/gklu/devops/master/jenkins.yaml
  
secrets:
  jenkinsAdmin:
    file: ./jenkinsAdmin
volumes:
  jenkins_home:

